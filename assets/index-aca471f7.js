var J=Object.defineProperty;var W=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E=(e,t,n)=>(W(e,typeof t!="symbol"?t+"":t,n),n),G=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var I=(e,t,n)=>(G(e,t,"read from private field"),n?n.call(e):t.get(e)),O=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();function o({tagName:e,className:t,attributes:n={}}){const i=document.createElement(e);if(t){const a=t.split(" ").filter(Boolean);i.classList.add(...a)}return Object.keys(n).forEach(a=>i.setAttribute(a,n[a])),i}function k(e){const{source:t,name:n}=e;return o({tagName:"img",className:"fighter-preview___img",attributes:{src:t,title:n,alt:n}})}function L(e,t){const i=o({tagName:"div",className:`fighter-preview___root ${t==="right"?"fighter-preview___right":"fighter-preview___left"}`});if(e){const{name:a,health:r,attack:s,defense:d}=e,g=k(e);i.append(g),i.innerHTML+=`
          <p class="fighter_preview__name">${a}</p>
          <div class='fighter_preview__details-container'>
              <p>Health: <span>${r}</span></p>
              <p>Attack: <span>${s}</span></p>
              <p>Defense: <span>${d}</span></p>
          </div>
      `}return i}const m={PlayerOneAttack:"KeyA",PlayerOneBlock:"KeyD",PlayerTwoAttack:"KeyJ",PlayerTwoBlock:"KeyL",PlayerOneCriticalHitCombination:["KeyQ","KeyW","KeyE"],PlayerTwoCriticalHitCombination:["KeyU","KeyI","KeyO"]};function D(){return Math.random()+1}function U(e){const t=D();return e.attack*t}function Q(e){const t=D();return e.defense*t}function T(e,t){const n=U(e),i=Q(t);return Math.max(n-i,0)}async function Y(e,t){return new Promise(n=>{let i=e.health,a=t.health,r=e.isBlock,s=t.isBlock;const d=[!1,!1,!1],g=[!1,!1,!1];let w=!1,N=!1;const p={hitPlayer1Event:()=>{!s&&!r&&(a-=T(e,t))},hitPlayer2Event:()=>{!s&&!r&&(i-=T(t,e))},criticalHitPlayer1Event:()=>{d[0]&&d[1]&&d[2]&&!w&&(a-=2*e.attack,w=!0,setTimeout(()=>{w=!1},1e4))},criticalHitPlayer2Event:()=>{g[0]&&g[1]&&g[2]&&!N&&(i-=2*t.attack,N=!0,setTimeout(()=>{N=!1},1e4))}},P=new Map([[m.PlayerOneAttack,p.hitPlayer1Event],[m.PlayerTwoAttack,p.hitPlayer2Event]]);function B(l,c){l.forEach(h=>P.set(h,c))}B(m.PlayerOneCriticalHitCombination,p.criticalHitPlayer1Event),B(m.PlayerTwoCriticalHitCombination,p.criticalHitPlayer2Event);function j(l){const c=P.get(l);c&&c()}function q(){n(i>a?e:t)}function R(){const l=document.getElementById("left-fighter-indicator"),c=document.getElementById("right-fighter-indicator"),h=e.health,y=t.health,_=i/h*100,v=a/y*100;l.style.width=_<=0?"0":`${_}%`,c.style.width=v<=0?"0":`${v}%`}function C(l,c){const h=m.PlayerOneCriticalHitCombination.indexOf(l),y=m.PlayerTwoCriticalHitCombination.indexOf(l),_=m.PlayerOneBlock.includes(l),v=m.PlayerTwoBlock.includes(l);switch(!0){case h!==-1:d[h]=c;break;case y!==-1:g[y]=c;break;case _:r=c;break;case v:s=c;break}}function H(l){const{code:c}=l;C(c,!0),j(c),R()}function F(l){const{code:c}=l;C(c,!1),(i<=0||a<=0)&&(document.removeEventListener("keydown",H),document.removeEventListener("keyup",F),q())}document.addEventListener("keydown",H),document.addEventListener("keyup",F)})}function Z(){return document.getElementById("root")}function V(){const e=document.getElementsByClassName("modal-layer")[0];e==null||e.remove()}function z(e,t){const n=o({tagName:"div",className:"modal-header"}),i=o({tagName:"span"}),a=o({tagName:"div",className:"close-btn"});i.innerText=e,a.innerText="Ã—";const r=()=>{V(),t()};return a.addEventListener("click",r),n.append(i,a),n}function X({title:e,bodyElement:t,onClose:n}){const i=o({tagName:"div",className:"modal-layer"}),a=o({tagName:"div",className:"modal-root"}),r=z(e,n);return a.append(r,t),i.append(a),i}function ee({title:e,bodyElement:t,onClose:n=()=>{}}){const i=Z(),a=X({title:e,bodyElement:t,onClose:n});i.append(a)}function te(e){const t=k(e);t.classList.remove("fighter-preview___img"),t.classList.add("modal-winner-img"),ee({title:`${e.name} won!`,bodyElement:t})}function K(e,t){const n=k(e),a=o({tagName:"div",className:`arena___fighter ${t==="right"?"arena___right-fighter":"arena___left-fighter"}`});return a.append(n),a}function ne(e,t){const n=o({tagName:"div",className:"arena___battlefield"}),i=K(e,"left"),a=K(t,"right");return n.append(i,a),n}function M(e,t){const{name:n}=e,i=o({tagName:"div",className:"arena___fighter-indicator"}),a=o({tagName:"span",className:"arena___fighter-name"}),r=o({tagName:"div",className:"arena___health-indicator"}),s=o({tagName:"div",className:"arena___health-bar",attributes:{id:`${t}-fighter-indicator`}});return a.innerText=n,r.append(s),i.append(a,r),i}function ae(e,t){const n=o({tagName:"div",className:"arena___fight-status"}),i=o({tagName:"div",className:"arena___versus-sign"}),a=M(e,"left"),r=M(t,"right");return n.append(a,i,r),n}function $(e,t){const n=o({tagName:"div",className:"arena___fighter-combo"});return n.innerHTML=`
        <p>${e.name}</p>
        <p><span>COMBO:</span></p>
        <p>Hit: <span>${t==="left"?"A":"J"}</span></p>
        <p>Super hit: <span>${t==="left"?"QWE":"UIO"}</span></p>
        <p>Block: <span>${t==="left"?"D":"L"}</span></p>
    `,n}function ie(e,t){const n=o({tagName:"div",className:"arena___fight-combo"}),i=$(e,"left"),a=$(t,"right");return n.append(i,a),n}function re(e){const t=o({tagName:"div",className:"arena___root"}),n=ae(...e),i=ne(...e),a=ie(...e);return t.append(n,i,a),t}function oe(e){const t=document.getElementById("root"),n=re(e);t.innerHTML="",t.append(n),Y(e[0],e[1]).then(a=>te(a)).catch(a=>console.error("Fight error:",a))}const se="/sf-game-js/assets/versus-768a076e.png",ce=[{_id:"1",name:"Ryu",source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}],le=[{_id:"1",name:"Ryu",health:45,attack:4,defense:3,source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",health:60,attack:3,defense:1,source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",health:45,attack:4,defense:3,source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",health:60,attack:4,defense:1,source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",health:45,attack:3,defense:4,source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",health:45,attack:5,defense:4,source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}];function me(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf(".json"),i=e.substring(t+1,n);return le.find(a=>a._id===i)}async function de(e){const t=e==="fighters.json"?ce:me(e);return new Promise((n,i)=>{setTimeout(()=>t?n(t):i(Error("Failed to load")),500)})}async function A(e,t="GET"){return de(e)}var b;class ge{constructor(){O(this,b,"fighters.json")}async getFighters(){try{return await A(I(this,b))}catch(t){throw t}}async getFighterDetails(t){try{return await A.call(this,`details/fighter/${t}.json`)}catch(n){throw n}}}b=new WeakMap;const S=new ge,x=new Map;async function he(e){let t=x.get(e);return t||(t=await S.getFighterDetails(e),x.set(e,t)),t}function fe(e){oe(e)}function ue(e){const t=e.filter(Boolean).length===2,n=()=>fe(e),i=o({tagName:"div",className:"preview-container___versus-block"}),a=o({tagName:"img",className:"preview-container___versus-img",attributes:{src:se}}),s=o({tagName:"button",className:`preview-container___fight-btn ${t?"":"disabled"}`});return s.addEventListener("click",n,!1),s.innerText="Fight",i.append(a,s),i}function pe(e){const t=document.querySelector(".preview-container___root"),[n,i]=e,a=L(n,"left"),r=L(i,"right"),s=ue(e);t.innerHTML="",t.append(a,s,r)}function ye(){let e=[];return async(t,n)=>{const i=await he(n),[a,r]=e;e=[a??i,a?r??i:r],pe(e)}}function _e(e){const{source:t,name:n}=e;return o({tagName:"img",className:"fighter___fighter-image",attributes:{src:t,title:n,alt:n}})}function ve(e,t){const n=o({tagName:"div",className:"fighters___fighter"}),i=_e(e),a=r=>t(r,e._id);return n.append(i),n.addEventListener("click",a,!1),n}function be(e){const t=ye(),n=o({tagName:"div",className:"fighters___root"}),i=o({tagName:"div",className:"preview-container___root"}),a=o({tagName:"div",className:"fighters___list"}),r=e.map(s=>ve(s,t));return a.append(...r),n.append(i,a),n}const f=class{static async startApp(){try{f.loadingElement.style.visibility="visible";const t=await S.getFighters(),n=be(t);f.rootElement.appendChild(n)}catch(t){console.warn(t),f.rootElement.innerText="Failed to load data"}finally{f.loadingElement.style.visibility="hidden"}}};let u=f;E(u,"rootElement",document.getElementById("root")),E(u,"loadingElement",document.getElementById("loading-overlay"));u.startApp();
